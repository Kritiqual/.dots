#!/usr/bin/env bash

# If no options is passed, i.e `./script`,
# will fallback to use this function
fallback_func() {
    echo -e "This is fallback func"
}

mode_a=0
mode_b=0
mode_c=0
mode_h=0

while getopts "abch" opt; do
    case ${opt} in
    a) mode_a=1 ;;
    b) mode_b=1 ;;
    c) mode_c=1 ;;
    h) mode_h=1 ;;
    esac
    # *) echo -e "Invalid option: -${OPTARG}" ;;
done
shift $((OPTIND - 1))

if [[ ${mode_b} -gt 0 ]]; then
    if [[ ${mode_a} -gt 0 ]]; then
        mode_a=0 && mode_b=0 && mode_c=1
        if [[ ${mode_h} -gt 0 ]]; then
            echo "Have mode c_h"
        else
            echo "Have mode c"
        fi
    else
        if [[ ${mode_c} -gt 0 ]]; then
            mode_b=0
            if [[ ${mode_h} -gt 0 ]]; then
                echo "Have mode c_h"
            else
                echo "Have mode c"
            fi
        else
            if [[ ${mode_h} -gt 0 ]]; then
                echo "Have mode b_h"
            else
                echo "Have mode b"
            fi
        fi
    fi
else
    if [[ ${mode_c} -gt 0 ]]; then
        echo "Have mode c"
    else
        if [[ ${mode_a} -gt 0 ]]; then
            echo "Have mode a"
        else
            echo "No mode"
        fi
    fi
fi

echo -e "(a, b, c, h) = (${mode_a}, ${mode_b}, ${mode_c}, ${mode_h})"
